<div
  +loading="{
    users: null,
    isLoading: false,
    error: null
  }"
  +loaded="new Promise(async resolve => {
    isLoading = true;
    try {
      const response = await fetch('https://randomuser.me/api/?results=3');
      const { results } = await response.json();
      users = results;
      error = null;
    } catch ($error) {
      error = $error;
    } finally {
      isLoading = false;
    }
  })"
>
  <p $exist="isLoading">Loading...</p>
  <p $exist="error">Error fetching users</p>
  <ul $exist="!error">
    <li $each#item:user="users">
      <img
        $src="user.picture.thumbnail"
        $alt="`picture of ${ user.name.first } ${ user.name.last }`"
      />
      <p>${ user.name.first } ${ user.name.last }</p>
    </li>
  </ul>
</div>
